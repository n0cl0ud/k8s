<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kubernetes Components Details</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        h1 {
            text-align: center;
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }
        
        .subtitle {
            text-align: center;
            opacity: 0.9;
            margin-bottom: 40px;
            font-size: 1.2em;
        }
        
        .components-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .component-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
        }
        
        .component-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.3);
            border-color: #4CAF50;
        }
        
        .component-card.active {
            border-color: #4CAF50;
            box-shadow: 0 0 30px rgba(76, 175, 80, 0.4);
        }
        
        .component-icon {
            font-size: 3em;
            text-align: center;
            margin-bottom: 15px;
        }
        
        .component-title {
            font-size: 1.5em;
            font-weight: bold;
            text-align: center;
            margin-bottom: 10px;
        }
        
        .component-role {
            text-align: center;
            opacity: 0.8;
            margin-bottom: 15px;
            font-style: italic;
        }
        
        .detail-panel {
            display: none;
            background: rgba(0, 0, 0, 0.9);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 1000;
            padding: 40px;
            overflow-y: auto;
        }
        
        .detail-content {
            max-width: 1000px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 40px;
            position: relative;
        }
        
        .close-btn {
            position: absolute;
            top: 20px;
            right: 30px;
            background: none;
            border: none;
            color: white;
            font-size: 2em;
            cursor: pointer;
            padding: 10px;
            border-radius: 50%;
            transition: all 0.3s ease;
        }
        
        .close-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: rotate(90deg);
        }
        
        .detail-sections {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 30px;
        }
        
        .detail-section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
        }
        
        .detail-section h3 {
            color: #4CAF50;
            margin-bottom: 15px;
            font-size: 1.3em;
            border-bottom: 2px solid #4CAF50;
            padding-bottom: 5px;
        }
        
        .api-endpoint {
            background: #1a1a1a;
            color: #00ff00;
            font-family: 'Courier New', monospace;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            border-left: 4px solid #4CAF50;
        }
        
        .process-flow {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
        }
        
        .metric {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .metric:last-child {
            border-bottom: none;
        }
        
        .tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            gap: 10px;
        }
        
        .tab {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .tab.active {
            background: #4CAF50;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
        }
        
        .architecture-diagram {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            text-align: center;
        }
        
        .node-diagram {
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin: 20px 0;
        }
        
        .node {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 20px;
            min-width: 150px;
            border: 2px solid #4CAF50;
        }
        
        .arrow-between {
            color: #4CAF50;
            font-size: 2em;
            margin: 0 20px;
        }
        
        .code-block {
            background: #1a1a1a;
            color: #f8f8f2;
            font-family: 'Courier New', monospace;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            overflow-x: auto;
            border-left: 5px solid #4CAF50;
        }
        
        .highlight {
            background: rgba(76, 175, 80, 0.2);
            padding: 2px 6px;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üèóÔ∏è Kubernetes Components</h1>
        <p class="subtitle">Interactive exploration of cluster components</p>
        
        <div class="tabs">
            <button class="tab active" onclick="showTab('control-plane')">üéØ Control Plane</button>
            <button class="tab" onclick="showTab('worker-nodes')">üë∑ Worker Nodes</button>
            <button class="tab" onclick="showTab('add-ons')">üîå Add-ons</button>
        </div>
        
        <div id="control-plane" class="tab-content">
            <div class="components-grid">
                <div class="component-card" onclick="showDetail('api-server')">
                    <div class="component-icon">üåê</div>
                    <div class="component-title">API Server</div>
                    <div class="component-role">Cluster gateway</div>
                    <p>Central point for all communications. Exposes the Kubernetes REST API and validates/persists objects.</p>
                </div>
                
                <div class="component-card" onclick="showDetail('etcd')">
                    <div class="component-icon">üóÑÔ∏è</div>
                    <div class="component-title">etcd</div>
                    <div class="component-role">Cluster database</div>
                    <p>Distributed and consistent key-value store. Contains all Kubernetes cluster state.</p>
                </div>
                
                <div class="component-card" onclick="showDetail('scheduler')">
                    <div class="component-icon">üìã</div>
                    <div class="component-title">Scheduler</div>
                    <div class="component-role">Workload organizer</div>
                    <p>Decides which node to place each pod on based on resources and constraints.</p>
                </div>
                
                <div class="component-card" onclick="showDetail('controller-manager')">
                    <div class="component-icon">üéÆ</div>
                    <div class="component-title">Controller Manager</div>
                    <div class="component-role">Control loops</div>
                    <p>Runs controllers that regulate cluster state (Deployments, Services, etc.).</p>
                </div>
            </div>
        </div>
        
        <div id="worker-nodes" class="tab-content" style="display: none;">
            <div class="components-grid">
                <div class="component-card" onclick="showDetail('kubelet')">
                    <div class="component-icon">ü§ñ</div>
                    <div class="component-title">Kubelet</div>
                    <div class="component-role">Node agent</div>
                    <p>Ensures containers are running in pods assigned to its node.</p>
                </div>
                
                <div class="component-card" onclick="showDetail('kube-proxy')">
                    <div class="component-icon">üîÄ</div>
                    <div class="component-title">kube-proxy</div>
                    <div class="component-role">Network proxy</div>
                    <p>Maintains network rules and enables communication with pods.</p>
                </div>
                
                <div class="component-card" onclick="showDetail('container-runtime')">
                    <div class="component-icon">üì¶</div>
                    <div class="component-title">Container Runtime</div>
                    <div class="component-role">Container engine</div>
                    <p>Docker, containerd, CRI-O - executes and manages containers.</p>
                </div>
            </div>
        </div>
        
        <div id="add-ons" class="tab-content" style="display: none;">
            <div class="components-grid">
                <div class="component-card" onclick="showDetail('dns')">
                    <div class="component-icon">üîç</div>
                    <div class="component-title">CoreDNS</div>
                    <div class="component-role">Name service</div>
                    <p>DNS resolution for services and pods in the cluster.</p>
                </div>
                
                <div class="component-card" onclick="showDetail('dashboard')">
                    <div class="component-icon">üìä</div>
                    <div class="component-title">Dashboard</div>
                    <div class="component-role">Web interface</div>
                    <p>Web user interface to manage and monitor the cluster.</p>
                </div>
                
                <div class="component-card" onclick="showDetail('ingress')">
                    <div class="component-icon">üö™</div>
                    <div class="component-title">Ingress Controller</div>
                    <div class="component-role">HTTP router</div>
                    <p>Manages external access to services via HTTP/HTTPS.</p>
                </div>
            </div>
        </div>
        
        <div class="architecture-diagram">
            <h2>üèóÔ∏è Global Architecture</h2>
            <div class="node-diagram">
                <div class="node">
                    <strong>Master Node</strong><br>
                    API Server<br>
                    etcd<br>
                    Scheduler<br>
                    Controller Manager
                </div>
                <div class="arrow-between">‚Üí</div>
                <div class="node">
                    <strong>Worker Node 1</strong><br>
                    Kubelet<br>
                    kube-proxy<br>
                    Container Runtime<br>
                    Pods
                </div>
                <div class="arrow-between">‚Üí</div>
                <div class="node">
                    <strong>Worker Node 2</strong><br>
                    Kubelet<br>
                    kube-proxy<br>
                    Container Runtime<br>
                    Pods
                </div>
            </div>
        </div>
    </div>

    <!-- Detail Panels for each component -->
    <div id="detail-api-server" class="detail-panel">
        <div class="detail-content">
            <button class="close-btn" onclick="closeDetail()">√ó</button>
            <h2>üåê API Server - The Central Brain</h2>
            
            <div class="detail-sections">
                <div class="detail-section">
                    <h3>üîß Responsibilities</h3>
                    <ul>
                        <li><strong>Validation</strong> of API requests</li>
                        <li><strong>Authentication</strong> and authorization</li>
                        <li><strong>Mutation</strong> of objects (webhooks)</li>
                        <li><strong>Serialization</strong> to etcd</li>
                        <li><strong>Watching</strong> for changes</li>
                    </ul>
                    
                    <h3>üîå API Endpoints</h3>
                    <div class="api-endpoint">GET /api/v1/pods</div>
                    <div class="api-endpoint">POST /api/v1/namespaces/default/pods</div>
                    <div class="api-endpoint">GET /apis/apps/v1/deployments</div>
                </div>
                
                <div class="detail-section">
                    <h3>‚ö° Internal Process</h3>
                    <div class="process-flow">
                        <strong>1. HTTP Request</strong> ‚Üí Parse JSON/YAML<br>
                        <strong>2. Authentication</strong> ‚Üí Tokens, Certificates<br>
                        <strong>3. Authorization</strong> ‚Üí RBAC, ABAC<br>
                        <strong>4. Admission Control</strong> ‚Üí Webhooks<br>
                        <strong>5. Validation</strong> ‚Üí OpenAPI Schema<br>
                        <strong>6. etcd Storage</strong> ‚Üí Persistence<br>
                        <strong>7. Response</strong> ‚Üí JSON to client
                    </div>
                    
                    <h3>üìä Typical Metrics</h3>
                    <div class="metric">
                        <span>Requests/sec</span>
                        <span class="highlight">~1000-5000</span>
                    </div>
                    <div class="metric">
                        <span>p99 Latency</span>
                        <span class="highlight">&lt; 100ms</span>
                    </div>
                    <div class="metric">
                        <span>Port</span>
                        <span class="highlight">6443 (HTTPS)</span>
                    </div>
                </div>
            </div>
            
            <div class="code-block">
# Typical API Server configuration
kube-apiserver \
  --advertise-address=10.0.0.1 \
  --etcd-servers=https://127.0.0.1:2379 \
  --service-cluster-ip-range=10.96.0.0/12 \
  --authorization-mode=RBAC \
  --enable-admission-plugins=NodeRestriction,MutatingAdmissionWebhook
            </div>
        </div>
    </div>

    <!-- Continuer avec les autres composants... -->
    <div id="detail-etcd" class="detail-panel">
        <div class="detail-content">
            <button class="close-btn" onclick="closeDetail()">√ó</button>
            <h2>üóÑÔ∏è etcd - The Cluster Memory</h2>
            
            <div class="detail-sections">
                <div class="detail-section">
                    <h3>üíæ Data Structure</h3>
                    <div class="process-flow">
                        <strong>/registry/pods/default/my-pod</strong><br>
                        <strong>/registry/services/kube-system/kube-dns</strong><br>
                        <strong>/registry/deployments/default/nginx</strong><br>
                        <strong>/registry/secrets/default/db-password</strong>
                    </div>
                    
                    <h3>üîÑ Features</h3>
                    <ul>
                        <li><strong>MVCC</strong> - Multi-Version Concurrency Control</li>
                        <li><strong>Watch</strong> - Change notifications</li>
                        <li><strong>Transactions</strong> - Atomic operations</li>
                        <li><strong>Lease</strong> - TTL for objects</li>
                        <li><strong>Compaction</strong> - Historical cleanup</li>
                    </ul>
                </div>
                
                <div class="detail-section">
                    <h3>üéØ Raft Algorithm</h3>
                    <div class="process-flow">
                        <strong>Leader Election</strong> ‚Üí Only one active leader<br>
                        <strong>Log Replication</strong> ‚Üí Copy to all nodes<br>
                        <strong>Consensus</strong> ‚Üí Majority must accept<br>
                        <strong>Fault Tolerance</strong> ‚Üí Survives N/2-1 failures
                    </div>
                    
                    <h3>üìä Performance</h3>
                    <div class="metric">
                        <span>Writes/sec</span>
                        <span class="highlight">~10,000</span>
                    </div>
                    <div class="metric">
                        <span>Reads/sec</span>
                        <span class="highlight">~100,000</span>
                    </div>
                    <div class="metric">
                        <span>Port</span>
                        <span class="highlight">2379 (client), 2380 (peer)</span>
                    </div>
                </div>
            </div>
            
            <div class="code-block">
# Useful etcd commands
export ETCDCTL_API=3

# List all keys
etcdctl get "" --prefix --keys-only

# View a specific pod
etcdctl get /registry/pods/default/my-pod

# Cluster backup
etcdctl snapshot save backup.db

# Restore from backup
etcdctl snapshot restore backup.db
            </div>
        </div>
    </div>

    <div id="detail-scheduler" class="detail-panel">
        <div class="detail-content">
            <button class="close-btn" onclick="closeDetail()">√ó</button>
            <h2>üìã Scheduler - The Placement Intelligence</h2>
            
            <div class="detail-sections">
                <div class="detail-section">
                    <h3>üß† Scheduling Algorithm</h3>
                    <div class="process-flow">
                        <strong>1. Filtering</strong> ‚Üí Eliminate unsuitable nodes<br>
                        <strong>2. Scoring</strong> ‚Üí Score each viable node<br>
                        <strong>3. Selection</strong> ‚Üí Choose the best score<br>
                        <strong>4. Binding</strong> ‚Üí Assign pod to node
                    </div>
                    
                    <h3>üéØ Filtering Criteria</h3>
                    <ul>
                        <li><strong>NodeSelector</strong> - Required labels</li>
                        <li><strong>Taints/Tolerations</strong> - Restrictions</li>
                        <li><strong>Resource Requests</strong> - Sufficient CPU/RAM</li>
                        <li><strong>Affinity Rules</strong> - Preferred colocation</li>
                        <li><strong>Volume Zones</strong> - Storage availability</li>
                    </ul>
                </div>
                
                <div class="detail-section">
                    <h3>üìä Scoring Functions</h3>
                    <div class="process-flow">
                        <strong>LeastRequestedPriority</strong> ‚Üí Less loaded nodes<br>
                        <strong>BalancedResourceAllocation</strong> ‚Üí CPU/RAM balance<br>
                        <strong>NodeAffinityPriority</strong> ‚Üí Affinity preferences<br>
                        <strong>InterPodAffinityPriority</strong> ‚Üí Pod colocation
                    </div>
                    
                    <h3>‚ö° Performance</h3>
                    <div class="metric">
                        <span>Pods/sec</span>
                        <span class="highlight">~100-500</span>
                    </div>
                    <div class="metric">
                        <span>Scheduling latency</span>
                        <span class="highlight">&lt; 100ms</span>
                    </div>
                    <div class="metric">
                        <span>Queue depth</span>
                        <span class="highlight">Variable</span>
                    </div>
                </div>
            </div>
            
            <div class="code-block">
# Custom scheduler configuration
apiVersion: kubescheduler.config.k8s.io/v1beta3
kind: KubeSchedulerConfiguration
profiles:
- schedulerName: my-scheduler
  plugins:
    score:
      enabled:
      - name: NodeResourcesFit
      - name: NodeAffinity
  pluginConfig:
  - name: NodeResourcesFit
    args:
      scoringStrategy:
        type: LeastAllocated
            </div>
        </div>
    </div>

    <!-- Controller Manager Details -->
    <div id="detail-controller-manager" class="detail-panel">
        <div class="detail-content">
            <button class="close-btn" onclick="closeDetail()">√ó</button>
            <h2>üéÆ Controller Manager - The Control Loops</h2>
            
            <div class="detail-sections">
                <div class="detail-section">
                    <h3>üîÑ Main Controllers</h3>
                    <div class="process-flow">
                        <strong>Deployment Controller</strong> ‚Üí Manages ReplicaSets<br>
                        <strong>ReplicaSet Controller</strong> ‚Üí Maintains pod count<br>
                        <strong>Node Controller</strong> ‚Üí Monitors node health<br>
                        <strong>Service Controller</strong> ‚Üí Manages LoadBalancers<br>
                        <strong>Endpoint Controller</strong> ‚Üí Syncs services/pods<br>
                        <strong>Namespace Controller</strong> ‚Üí NS cleanup<br>
                        <strong>PV Controller</strong> ‚Üí Volume binding
                    </div>
                    
                    <h3>‚ö° Control Loop</h3>
                    <div class="process-flow">
                        <strong>1. Watch API</strong> ‚Üí Listen to etcd changes<br>
                        <strong>2. Compare State</strong> ‚Üí Current vs Desired<br>
                        <strong>3. Take Action</strong> ‚Üí Correct if different<br>
                        <strong>4. Update Status</strong> ‚Üí Report state<br>
                        <strong>5. Requeue</strong> ‚Üí Repeat in X seconds
                    </div>
                </div>
                
                <div class="detail-section">
                    <h3>üéØ Pod Deployment - Actions</h3>
                    <div class="process-flow">
                        <strong>Deployment Created</strong> ‚Üí Controller detects<br>
                        <strong>Create ReplicaSet</strong> ‚Üí With pod template<br>
                        <strong>ReplicaSet Controller</strong> ‚Üí Creates missing pods<br>
                        <strong>Endpoint Controller</strong> ‚Üí Updates service endpoints<br>
                        <strong>Node Controller</strong> ‚Üí Checks node capacity
                    </div>
                    
                    <h3>üìä M√©triques</h3>
                    <div class="metric">
                        <span>Active controllers</span>
                        <span class="highlight">~20-30</span>
                    </div>
                    <div class="metric">
                        <span>Loop frequency</span>
                        <span class="highlight">30s default</span>
                    </div>
                    <div class="metric">
                        <span>Worker threads</span>
                        <span class="highlight">5 per controller</span>
                    </div>
                </div>
            </div>
            
            <div class="code-block">
# Example: ReplicaSet Controller in action
kubectl create deployment nginx --image=nginx --replicas=3

# Controller observes:
# Desired: 3 nginx pods
# Actual: 0 nginx pods
# Action: Create 3 pods

# Controller logs:
I0729 controller.go:156] "ReplicaSet nginx-xyz created 3 pods"
I0729 controller.go:189] "Deployment nginx rollout complete"
            </div>
        </div>
    </div>

    <!-- Kubelet Details -->
    <div id="detail-kubelet" class="detail-panel">
        <div class="detail-content">
            <button class="close-btn" onclick="closeDetail()">√ó</button>
            <h2>ü§ñ Kubelet - The Node Agent</h2>
            
            <div class="detail-sections">
                <div class="detail-section">
                    <h3>üîß Responsibilities</h3>
                    <ul>
                        <li><strong>Pod Lifecycle</strong> - Pod creation/deletion</li>
                        <li><strong>Container Management</strong> - Via CRI</li>
                        <li><strong>Volume Mounting</strong> - Persistent storage</li>
                        <li><strong>Network Setup</strong> - Via CNI</li>
                        <li><strong>Health Checks</strong> - Liveness/Readiness</li>
                        <li><strong>Resource Monitoring</strong> - CPU/RAM usage</li>
                        <li><strong>Node Status</strong> - Heartbeat to API</li>
                    </ul>
                    
                    <h3>‚ö° Pod Deployment - Steps</h3>
                    <div class="process-flow">
                        <strong>1. Watch API</strong> ‚Üí Pod assigned to this node<br>
                        <strong>2. Create Sandbox</strong> ‚Üí Pod network namespace<br>
                        <strong>3. Pull Images</strong> ‚Üí Download containers<br>
                        <strong>4. Mount Volumes</strong> ‚Üí Attach storage<br>
                        <strong>5. Start Containers</strong> ‚Üí Init ‚Üí main order<br>
                        <strong>6. Health Checks</strong> ‚Üí Probes start<br>
                        <strong>7. Update Status</strong> ‚Üí Pod Running to API
                    </div>
                </div>
                
                <div class="detail-section">
                    <h3>üîå Interfaces (CRI/CNI/CSI)</h3>
                    <div class="process-flow">
                        <strong>CRI (Container Runtime)</strong><br>
                        - RuntimeService: Manage pods/containers<br>
                        - ImageService: Pull/List images<br><br>
                        
                        <strong>CNI (Container Network)</strong><br>
                        - ADD: Setup pod network<br>
                        - DEL: Cleanup network<br><br>
                        
                        <strong>CSI (Container Storage)</strong><br>
                        - Mount/Unmount volumes<br>
                        - Expand volumes
                    </div>
                    
                    <h3>üìä Monitoring</h3>
                    <div class="metric">
                        <span>API Heartbeat</span>
                        <span class="highlight">10s interval</span>
                    </div>
                    <div class="metric">
                        <span>Pod sync</span>
                        <span class="highlight">1s interval</span>
                    </div>
                    <div class="metric">
                        <span>Port</span>
                        <span class="highlight">10250 (API), 10255 (readonly)</span>
                    </div>
                </div>
            </div>
            
            <div class="code-block">
# Kubelet configuration
kubelet \
  --config=/var/lib/kubelet/config.yaml \
  --container-runtime=remote \
  --container-runtime-endpoint=unix:///var/run/containerd/containerd.sock \
  --pod-cidr=10.244.1.0/24 \
  --cluster-dns=10.96.0.10

# Pod deployment logs
I0729 kubelet.go:1956] "SyncLoop received pod" pod="default/nginx-abc123"
I0729 kuberuntime_manager.go:744] "CreatePodSandbox for pod" pod="nginx-abc123"
I0729 kuberuntime_manager.go:872] "Pulling image" image="nginx:latest"
I0729 kuberuntime_manager.go:456] "StartContainer" container="nginx"
I0729 kubelet.go:2145] "Pod is running" pod="nginx-abc123"
            </div>
        </div>
    </div>

    <!-- kube-proxy Details -->
    <div id="detail-kube-proxy" class="detail-panel">
        <div class="detail-content">
            <button class="close-btn" onclick="closeDetail()">√ó</button>
            <h2>üîÄ kube-proxy - The Service Router</h2>
            
            <div class="detail-sections">
                <div class="detail-section">
                    <h3>üåê Proxy Modes</h3>
                    <div class="process-flow">
                        <strong>iptables (default)</strong><br>
                        - iptables rules for NAT<br>
                        - Round-robin load balancing<br>
                        - No userspace overhead<br><br>
                        
                        <strong>IPVS (performance)</strong><br>
                        - Kernel load balancer<br>
                        - Algorithms: rr, lc, dh, sh<br>
                        - Better performance<br><br>
                        
                        <strong>userspace (legacy)</strong><br>
                        - Userspace proxy<br>
                        - Slower but compatible
                    </div>
                    
                    <h3>‚ö° Pod Deployment Impact</h3>
                    <div class="process-flow">
                        <strong>Service Created</strong> ‚Üí kube-proxy watches<br>
                        <strong>Endpoints Updated</strong> ‚Üí New pod IP<br>
                        <strong>iptables Rules</strong> ‚Üí NAT to pod IP<br>
                        <strong>Load Balancing</strong> ‚Üí Traffic distribution
                    </div>
                </div>
                
                <div class="detail-section">
                    <h3>üîß iptables Rules Example</h3>
                    <div class="code-block" style="font-size: 0.8em;">
# Service nginx (ClusterIP: 10.96.123.45)
-A KUBE-SERVICES -d 10.96.123.45/32 -p tcp -m tcp --dport 80 -j KUBE-SVC-XYZ

# Load balancing to 3 pods
-A KUBE-SVC-XYZ -m statistic --mode random --probability 0.33333 -j KUBE-SEP-ABC
-A KUBE-SVC-XYZ -m statistic --mode random --probability 0.50000 -j KUBE-SEP-DEF  
-A KUBE-SVC-XYZ -j KUBE-SEP-GHI

# Destination pods
-A KUBE-SEP-ABC -p tcp -m tcp -j DNAT --to-destination 10.244.1.5:80
-A KUBE-SEP-DEF -p tcp -m tcp -j DNAT --to-destination 10.244.2.8:80
-A KUBE-SEP-GHI -p tcp -m tcp -j DNAT --to-destination 10.244.3.2:80
                    </div>
                    
                    <h3>üìä Performance</h3>
                    <div class="metric">
                        <span>Sync frequency</span>
                        <span class="highlight">30s</span>
                    </div>
                    <div class="metric">
                        <span>iptables rules</span>
                        <span class="highlight">~1000-10000</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Container Runtime Details -->
    <div id="detail-container-runtime" class="detail-panel">
        <div class="detail-content">
            <button class="close-btn" onclick="closeDetail()">√ó</button>
            <h2>üì¶ Container Runtime - The Execution Engine</h2>
            
            <div class="detail-sections">
                <div class="detail-section">
                    <h3>üèÉ Available Runtimes</h3>
                    <div class="process-flow">
                        <strong>containerd (recommended)</strong><br>
                        - CNCF graduated project<br>
                        - OCI compliant<br>
                        - Lightweight and performant<br><br>
                        
                        <strong>Docker Engine</strong><br>
                        - dockershim interface (deprecated)<br>
                        - Via cri-dockerd<br><br>
                        
                        <strong>CRI-O</strong><br>
                        - Specifically for Kubernetes<br>
                        - Minimal OCI runtime
                    </div>
                    
                    <h3>‚ö° Container Lifecycle</h3>
                    <div class="process-flow">
                        <strong>1. Image Pull</strong> ‚Üí Registry download<br>
                        <strong>2. Create Container</strong> ‚Üí OCI spec<br>
                        <strong>3. Start Process</strong> ‚Üí Entrypoint exec<br>
                        <strong>4. Monitor Health</strong> ‚Üí Process status<br>
                        <strong>5. Collect Logs</strong> ‚Üí stdout/stderr<br>
                        <strong>6. Resource Limits</strong> ‚Üí cgroups enforcement<br>
                        <strong>7. Stop/Kill</strong> ‚Üí Graceful/Force termination
                    </div>
                </div>
                
                <div class="detail-section">
                    <h3>üîå CRI gRPC Interface</h3>
                    <div class="process-flow">
                        <strong>RuntimeService</strong><br>
                        - RunPodSandbox()<br>
                        - CreateContainer()<br>
                        - StartContainer()<br>
                        - StopContainer()<br><br>
                        
                        <strong>ImageService</strong><br>
                        - PullImage()<br>
                        - ListImages()<br>
                        - RemoveImage()
                    </div>
                    
                    <h3>üìä Isolation</h3>
                    <div class="metric">
                        <span>Namespaces</span>
                        <span class="highlight">PID, NET, MNT, IPC, UTS</span>
                    </div>
                    <div class="metric">
                        <span>Cgroups</span>
                        <span class="highlight">CPU, Memory, IO</span>
                    </div>
                    <div class="metric">
                        <span>Security</span>
                        <span class="highlight">seccomp, AppArmor, SELinux</span>
                    </div>
                </div>
            </div>
            
            <div class="code-block">
# containerd config
[plugins."io.containerd.grpc.v1.cri"]
  sandbox_image = "k8s.gcr.io/pause:3.7"
  [plugins."io.containerd.grpc.v1.cri".containerd]
    default_runtime_name = "runc"
    [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.runc]
      runtime_type = "io.containerd.runc.v2"

# Debug commands
crictl ps                    # List containers
crictl pods                  # List pod sandboxes  
crictl logs CONTAINER_ID     # Container logs
crictl exec -it CONTAINER_ID sh  # Execute in container
            </div>
        </div>
    </div>

    <!-- DNS Details -->
    <div id="detail-dns" class="detail-panel">
        <div class="detail-content">
            <button class="close-btn" onclick="closeDetail()">√ó</button>
            <h2>üîç CoreDNS - Name Resolution</h2>
            
            <div class="detail-sections">
                <div class="detail-section">
                    <h3>üåê Kubernetes DNS Zones</h3>
                    <div class="process-flow">
                        <strong>Services</strong><br>
                        my-service.default.svc.cluster.local<br>
                        ‚Üí Service ClusterIP<br><br>
                        
                        <strong>Pods</strong><br>
                        10-244-1-5.default.pod.cluster.local<br>
                        ‚Üí Pod IP (if enabled)<br><br>
                        
                        <strong>Headless Services</strong><br>
                        nginx-0.nginx-headless.default.svc.cluster.local<br>
                        ‚Üí Direct pod IP
                    </div>
                    
                    <h3>‚ö° Pod Deployment Impact</h3>
                    <div class="process-flow">
                        <strong>Service Created</strong> ‚Üí DNS A record added<br>
                        <strong>Endpoints Updated</strong> ‚Üí Backend IPs updated<br>
                        <strong>Pod Ready</strong> ‚Üí Included in load balancing<br>
                        <strong>Pod Deleted</strong> ‚Üí Removed from DNS responses
                    </div>
                </div>
                
                <div class="detail-section">
                    <h3>üîß Configuration CoreDNS</h3>
                    <div class="code-block" style="font-size: 0.9em;">
# Corefile
.:53 {
    errors
    health {
        lameduck 5s
    }
    ready
    kubernetes cluster.local in-addr.arpa ip6.arpa {
        pods insecure
        fallthrough in-addr.arpa ip6.arpa
        ttl 30
    }
    prometheus :9153
    forward . /etc/resolv.conf
    cache 30
    loop
    reload
    loadbalance
}
                    </div>
                    
                    <h3>üìä M√©triques</h3>
                    <div class="metric">
                        <span>Requests/sec</span>
                        <span class="highlight">~1000-5000</span>
                    </div>
                    <div class="metric">
                        <span>Cache TTL</span>
                        <span class="highlight">30s</span>
                    </div>
                    <div class="metric">
                        <span>Port</span>
                        <span class="highlight">53 (UDP/TCP)</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Dashboard Details -->
    <div id="detail-dashboard" class="detail-panel">
        <div class="detail-content">
            <button class="close-btn" onclick="closeDetail()">√ó</button>
            <h2>üìä Dashboard - Web Interface</h2>
            
            <div class="detail-sections">
                <div class="detail-section">
                    <h3>üñ•Ô∏è Features</h3>
                    <ul>
                        <li><strong>Visualization</strong> - Workloads, Services, Storage</li>
                        <li><strong>Monitoring</strong> - CPU, RAM, Network usage</li>
                        <li><strong>Logs</strong> - Real-time container logs</li>
                        <li><strong>Shell</strong> - Exec into containers</li>
                        <li><strong>Editing</strong> - YAML manifests</li>
                        <li><strong>Scaling</strong> - Replicas up/down</li>
                    </ul>
                    
                    <h3>‚ö° Deployment Tracking</h3>
                    <div class="process-flow">
                        <strong>Pod Creation</strong> ‚Üí Visible in Workloads<br>
                        <strong>Status Updates</strong> ‚Üí Pending ‚Üí Running<br>
                        <strong>Resource Usage</strong> ‚Üí Real-time charts<br>
                        <strong>Events</strong> ‚Üí Action history<br>
                        <strong>Logs Stream</strong> ‚Üí Live stdout/stderr
                    </div>
                </div>
                
                <div class="detail-section">
                    <h3>üîí Security</h3>
                    <div class="process-flow">
                        <strong>Authentication</strong><br>
                        - Bearer Token<br>
                        - Client Certificate<br>
                        - Basic auth (not recommended)<br><br>
                        
                        <strong>Authorization</strong><br>
                        - RBAC ClusterRole<br>
                        - Namespace restrictions<br>
                        - Read-only mode available
                    </div>
                    
                    <h3>üìä Deployment</h3>
                    <div class="metric">
                        <span>Service port</span>
                        <span class="highlight">443 (HTTPS)</span>
                    </div>
                    <div class="metric">
                        <span>Namespace</span>
                        <span class="highlight">kubernetes-dashboard</span>
                    </div>
                    <div class="metric">
                        <span>Auto-refresh</span>
                        <span class="highlight">30s</span>
                    </div>
                </div>
            </div>
            
            <div class="code-block">
# Dashboard installation
kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v2.7.0/aio/deploy/recommended.yaml

# Create admin user
apiVersion: v1
kind: ServiceAccount
metadata:
  name: admin-user
  namespace: kubernetes-dashboard
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: admin-user
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: cluster-admin
subjects:
- kind: ServiceAccount
  name: admin-user
  namespace: kubernetes-dashboard

# Get token
kubectl -n kubernetes-dashboard create token admin-user
            </div>
        </div>
    </div>

    <!-- Ingress Controller Details -->
    <div id="detail-ingress" class="detail-panel">
        <div class="detail-content">
            <button class="close-btn" onclick="closeDetail()">√ó</button>
            <h2>üö™ Ingress Controller - HTTP Router</h2>
            
            <div class="detail-sections">
                <div class="detail-section">
                    <h3>üåê Popular Controllers</h3>
                    <div class="process-flow">
                        <strong>NGINX Ingress</strong><br>
                        - Most popular<br>
                        - nginx.conf configuration<br>
                        - Advanced load balancing<br><br>
                        
                        <strong>Traefik</strong><br>
                        - Auto-discovery<br>
                        - Integrated Let's Encrypt<br>
                        - Web dashboard<br><br>
                        
                        <strong>HAProxy</strong><br>
                        - High performance<br>
                        - TCP + HTTP support
                    </div>
                    
                    <h3>‚ö° Pod Deployment Impact</h3>
                    <div class="process-flow">
                        <strong>Ingress Resource</strong> ‚Üí Controller detects<br>
                        <strong>Backend Update</strong> ‚Üí Service endpoints<br>
                        <strong>Config Reload</strong> ‚Üí New route active<br>
                        <strong>Health Checks</strong> ‚Üí Pod readiness<br>
                        <strong>Load Balance</strong> ‚Üí Traffic to pods
                    </div>
                </div>
                
                <div class="detail-section">
                    <h3>üîß Configuration Example</h3>
                    <div class="code-block" style="font-size: 0.9em;">
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: nginx-ingress
  annotations:
    nginx.ingress.kubernetes.io/rewrite-target: /
spec:
  rules:
  - host: myapp.example.com
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: nginx-service
            port:
              number: 80
  tls:
  - hosts:
    - myapp.example.com
    secretName: tls-secret
                    </div>
                    
                    <h3>üìä Features</h3>
                    <div class="metric">
                        <span>SSL Termination</span>
                        <span class="highlight">‚úÖ</span>
                    </div>
                    <div class="metric">
                        <span>Path routing</span>
                        <span class="highlight">‚úÖ</span>
                    </div>
                    <div class="metric">
                        <span>Load balancing</span>
                        <span class="highlight">Round-robin, IP Hash</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function showTab(tabName) {
            // Hide all contents
            document.querySelectorAll('.tab-content').forEach(content => {
                content.style.display = 'none';
            });
            
            // Remove active class from all tabs
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected content
            document.getElementById(tabName).style.display = 'block';
            
            // Activate clicked tab
            event.target.classList.add('active');
        }
        
        function showDetail(componentName) {
            const detailPanel = document.getElementById('detail-' + componentName);
            if (detailPanel) {
                detailPanel.style.display = 'block';
                document.body.style.overflow = 'hidden';
            }
        }
        
        function closeDetail() {
            document.querySelectorAll('.detail-panel').forEach(panel => {
                panel.style.display = 'none';
            });
            document.body.style.overflow = 'auto';
        }
        
        // Close with Escape
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeDetail();
            }
        });
        
        // Close by clicking outside
        document.querySelectorAll('.detail-panel').forEach(panel => {
            panel.addEventListener('click', function(e) {
                if (e.target === panel) {
                    closeDetail();
                }
            });
        });
    </script>
</body>
</html>